<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 命名空间 ,一般写成 包名+类名的形式-->
<mapper namespace="com.qianfeng.dao.IStationDao">
	
	<resultMap type="station" id="stationMapper">
		<id property="stanum" column="stanum"/>
		<result property="staname" column="staname" />
		<result property="dir" column="dir"/>
		<result property="doftime" column="doftime"/>
       <result property="doltime" column="doltime"/>
       	 <result property="city" column="city"/>
       	  <result property="province" column="province"/>
       	   <result property="stop" column="stop"/>
       	  
	</resultMap>
	
<!-- 	<resultMap type="bookwriter" id="bookwriterMapper">
		<id property="bwid" column="bwid"/>
		<result property="bwname" column="bwname" />
		<result property="bwsex" column="bwsex"/>
	</resultMap> -->
	
	<!-- <select id="findAllBook" parameterType="String" resultMap="bookMapper">
		select bookID,bname,store,price,view,page,typename,bwname from books,booktype,bwriter where books.btypeid=booktype.btypeid and bwriter.bwid=books.bwid and books.bname like CONCAT('%',#{0},'%') and bwriter.bwname like CONCAT('%',#{2},'%') and booktype.typename like CONCAT('%',#{1},'%')      
	</select>
	
	<select id="findAllBookObject" parameterType="book" resultMap="bookMapper">
		select bookID,bname,store,price,view,page,typename,bwname from books,booktype,bwriter where books.btypeid=booktype.btypeid and bwriter.bwid=books.bwid and books.bname like CONCAT('%',#{bname},'%') and bwriter.bwname like CONCAT('%',#{bwname},'%') and booktype.typename like CONCAT('%',#{booktype},'%')      
	</select>
	
	<select id="findAll" resultMap="bookMapper">
		select bookID,bname,store,price,view,page,typename from books,booktype where books.btypeid=booktype.btypeid
	</select>
	
	<select id="findAllType" resultMap="booktypeMapper">
		select * from booktype
	</select>
	
	<insert id="addUser" parameterType="user">
		insert into user(username,password,email,role) values(#{username},#{password},#{email},#{role})
	</insert>	 -->
	
	<!-- 通过站名搜索站点 -->
	<select id="findAllStationByName" parameterType="String" resultMap="stationMapper">
	    select * from station where staname = #{staname}
		
	</select>
	
	<!-- 通过城市名搜索站点 -->
	<select id="findAllStationByCity" parameterType="String" resultMap="stationMapper">
	   
		select * from station 
		<where>
		<if test="_parameter !='' ">
	      city like CONCAT('%',#{stacity,jdbcType=VARCHAR},'%')	
		</if>
		</where>
	</select>
	
	<select id="findStationByName" parameterType="String" resultType="Station">
	   
		select * from station where  staname   = #{staname}
		
	</select>
	
	<select id="findAllStopByCity" parameterType="String" resultMap="stationMapper">
	   
		select * from station where  city  = #{city} and stop= '1'
		
	</select>
	
	<select id="findAllStopByProvince" parameterType="String" resultMap="stationMapper">
	   
		select * from station where  provinve  = #{province} and stop= '1'
		
	</select>
	
	<select id="findAllStop" resultMap="stationMapper">
	   
		select * from station where stop= '1'
		
	</select>
	
</mapper>





